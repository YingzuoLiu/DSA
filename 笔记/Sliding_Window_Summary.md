# ğŸ“˜ æ»‘åŠ¨çª—å£é¢˜å‹æ€»ç»“ï¼ˆMLE / æ¨èç®—æ³•æ–¹å‘ä¸“ç”¨ï¼‰

## ğŸ§  ä¸€ã€æ ¸å¿ƒæ€æƒ³

> æ»‘åŠ¨çª—å£ï¼ˆSliding Windowï¼‰æ˜¯ä¸€ç§ç”¨ä¸¤ä¸ªæŒ‡é’ˆç»´æŠ¤åŠ¨æ€åŒºé—´ `[left, right]`
> çš„æ–¹æ³•ï¼Œç”¨äºé«˜æ•ˆå¤„ç†**è¿ç»­å­æ•°ç»„ / å­ä¸²é—®é¢˜**ã€‚
>
> **æœ¬è´¨ï¼š**
> åŠ¨æ€ç»´æŠ¤çª—å£å†…çš„çŠ¶æ€ï¼Œä½¿å¾—æ¯æ¬¡æ‰©å¼ æˆ–æ”¶ç¼©éƒ½åªå¤„ç†ä¸€ä¸ªå…ƒç´ ï¼Œä»è€Œå®ç°
> `O(n)` çš„çº¿æ€§å¤æ‚åº¦ã€‚

------------------------------------------------------------------------

## ğŸ§© äºŒã€é€šç”¨æ¨¡æ¿ï¼ˆä¸¾ä¸€åä¸‰ï¼‰

``` python
def sliding_window(arr):
    left = 0
    window = defaultdict(int)   # è®°å½•çª—å£ä¸­å…ƒç´ å‡ºç°æƒ…å†µ
    res = 0                     # å­˜ç»“æœï¼ˆé•¿åº¦ã€æ•°é‡ã€æœ€å¤§å€¼ç­‰ï¼‰

    for right in range(len(arr)):
        # 1ï¸âƒ£ æ‰©å±•çª—å£ï¼šåŠ å…¥æ–°å…ƒç´ 
        x = arr[right]
        window[x] += 1

        # 2ï¸âƒ£ åˆ¤æ–­æ˜¯å¦éœ€è¦æ”¶ç¼©çª—å£
        while not valid(window):
            y = arr[left]
            window[y] -= 1
            if window[y] == 0:
                del window[y]
            left += 1

        # 3ï¸âƒ£ åœ¨æ»¡è¶³æ¡ä»¶æ—¶æ›´æ–°ç»“æœ
        res = update(res, window)

    return res
```

ğŸ“Œ æ¨¡æ¿ä¸­å¯ä»¥çµæ´»ä¿®æ”¹ï¼š -
`valid(window)`ï¼šåˆ¤æ–­çª—å£æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼ˆé•¿åº¦ã€å’Œã€æ— é‡å¤ç­‰ï¼‰\
- `update(res, window)`ï¼šæ ¹æ®é—®é¢˜æ›´æ–°ç»“æœï¼ˆæœ€å¤§é•¿åº¦ã€æœ€çŸ­åŒºé—´ã€è®¡æ•°ç­‰ï¼‰

------------------------------------------------------------------------

## âš™ï¸ ä¸‰ã€å…¸å‹é¢˜å‹åˆ†ç±»

### 1ï¸âƒ£ å›ºå®šçª—å£ç±»ï¼ˆçª—å£å¤§å°å›ºå®šï¼‰

ğŸ“˜ **ä»£è¡¨é¢˜ï¼š** - æ»‘åŠ¨çª—å£æœ€å¤§å€¼ï¼ˆLeetCode 239ï¼‰ - å¹³å‡æ¸©åº¦ã€è¿ç»­ K
å¤©çš„æœ€å¤§é”€å”®é¢ç­‰é—®é¢˜

**æ€è·¯ï¼š** çª—å£å¤§å°å›ºå®šä¸º
`k`ï¼Œæ¯æ¬¡å³ç§»ä¸€æ ¼ï¼Œç»´æŠ¤çª—å£å†…çš„æœ€å¤§å€¼/å¹³å‡å€¼ç­‰ã€‚

``` python
from collections import deque

def maxSlidingWindow(nums, k):
    dq = deque()
    res = []
    for i, num in enumerate(nums):
        # ç§»é™¤ä¸åœ¨çª—å£èŒƒå›´å†…çš„ä¸‹æ ‡
        while dq and dq[0] <= i - k:
            dq.popleft()
        # ç§»é™¤æ¯”å½“å‰æ•°å°çš„ï¼ˆä¿æŒé€’å‡ï¼‰
        while dq and nums[dq[-1]] < num:
            dq.pop()
        dq.append(i)
        # çª—å£å½¢æˆåè®°å½•ç»“æœ
        if i >= k - 1:
            res.append(nums[dq[0]])
    return res
```

ğŸ”¹ **ä¸¾ä¸€åä¸‰ï¼ˆæ¨èç³»ç»Ÿåœºæ™¯ï¼‰**\
ğŸ‘‰ è®¡ç®—"è¿‡å» 7 å¤©å†…ç”¨æˆ·ç‚¹å‡»ç‡ï¼ˆCTRï¼‰æ»‘åŠ¨å¹³å‡å€¼"\
ğŸ‘‰ ç›‘æ§"æœ€è¿‘ N æ¬¡æ›å…‰çš„ç‚¹å‡»è¶‹åŠ¿å˜åŒ–"

------------------------------------------------------------------------

### 2ï¸âƒ£ åŠ¨æ€çª—å£ç±»ï¼ˆçª—å£å¤§å°å¯å˜ï¼‰

ğŸ“˜ **ä»£è¡¨é¢˜ï¼š** - æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²ï¼ˆLeetCode 3ï¼‰ - å’Œå°äº K
çš„æœ€çŸ­å­æ•°ç»„ï¼ˆLeetCode 209ï¼‰ - è‡³å°‘åŒ…å« K ä¸ªä¸åŒæ•°å­—çš„å­æ•°ç»„

``` python
def lengthOfLongestSubstring(s):
    left = 0
    seen = set()
    max_len = 0
    for right, ch in enumerate(s):
        while ch in seen:
            seen.remove(s[left])
            left += 1
        seen.add(ch)
        max_len = max(max_len, right - left + 1)
    return max_len
```

ğŸ”¹ **ä¸¾ä¸€åä¸‰ï¼ˆæ¨èç³»ç»Ÿåœºæ™¯ï¼‰**\
ğŸ‘‰ æ¨¡æ‹Ÿç”¨æˆ· sessionï¼šæœ€é•¿è¿ç»­ä¸é‡å¤æµè§ˆçš„å•†å“åºåˆ—\
ğŸ‘‰ è®¡ç®—æ—¶é—´çª—å£å†…çš„æ›å…‰å¤šæ ·æ€§ï¼ˆdistinct item countï¼‰

------------------------------------------------------------------------

### 3ï¸âƒ£ æ»¡è¶³æ¡ä»¶çš„çª—å£ï¼ˆç»Ÿè®¡ç±»ï¼‰

ğŸ“˜ **ä»£è¡¨é¢˜ï¼š** - æœ€å°è¦†ç›–å­ä¸²ï¼ˆLeetCode 76ï¼‰ - å’Œä¸º K
çš„å­æ•°ç»„æ•°ç›®ï¼ˆLeetCode 560ï¼‰

``` python
def minWindow(s, t):
    need = Counter(t)
    window = defaultdict(int)
    have, need_count = 0, len(need)
    left, res = 0, (0, float('inf'))
    
    for right, c in enumerate(s):
        window[c] += 1
        if c in need and window[c] == need[c]:
            have += 1
        while have == need_count:
            if right - left < res[1] - res[0]:
                res = (left, right)
            window[s[left]] -= 1
            if s[left] in need and window[s[left]] < need[s[left]]:
                have -= 1
            left += 1
    l, r = res
    return "" if res[1] == float('inf') else s[l:r+1]
```

ğŸ”¹ **ä¸¾ä¸€åä¸‰ï¼ˆæ¨èç³»ç»Ÿåœºæ™¯ï¼‰** ğŸ‘‰
æ‰¾å‡ºåŒ…å«æ‰€æœ‰å…´è¶£æ ‡ç­¾çš„æœ€çŸ­ç”¨æˆ·æµè§ˆåºåˆ—\
ğŸ‘‰ è¯†åˆ«ç”¨æˆ·åœ¨ session ä¸­é¦–æ¬¡è§¦å‘"ç‚¹å‡»+åŠ è´­+ä¸‹å•"å…¨æµç¨‹çš„æœ€çŸ­æ—¶é—´çª—å£

------------------------------------------------------------------------

### 4ï¸âƒ£ ç´¯ç§¯å’Œçª—å£ï¼ˆå‰ç¼€å’Œ + æ»‘åŠ¨çª—å£ï¼‰

ğŸ“˜ **ä»£è¡¨é¢˜ï¼š** - å’Œä¸º K çš„å­æ•°ç»„æ•°ï¼ˆLeetCode 560ï¼‰ -
å¹³å‡å€¼å°äºé˜ˆå€¼çš„æœ€çŸ­çª—å£

``` python
def subarraySum(nums, k):
    prefix = 0
    count = 0
    seen = {0: 1}
    for num in nums:
        prefix += num
        count += seen.get(prefix - k, 0)
        seen[prefix] = seen.get(prefix, 0) + 1
    return count
```

ğŸ”¹ **ä¸¾ä¸€åä¸‰ï¼ˆæ¨èç³»ç»Ÿåœºæ™¯ï¼‰** ğŸ‘‰ ç»Ÿè®¡"è¿‘ N æ¬¡æ›å…‰ä¸­ç´¯è®¡è½¬åŒ– = k
çš„æ¬¡æ•°"\
ğŸ‘‰ åˆ†æ"æ—¶é—´çª—å£å†… engagement æ€»å’Œæ°å¥½è¾¾åˆ°æŸé˜ˆå€¼çš„è¡Œä¸ºæ®µè½"

------------------------------------------------------------------------

## ğŸ§® å››ã€æ—¶é—´å¤æ‚åº¦æ€»ç»“

  æ“ä½œç±»å‹           å‡æ‘Šå¤æ‚åº¦   è¯´æ˜
  ------------------ ------------ -------------------------
  çª—å£å³ç§»ï¼ˆæ‰©å¼ ï¼‰   O(1)         æ¯ä¸ªå…ƒç´ ä»…è¿›å…¥ä¸€æ¬¡
  çª—å£å·¦ç§»ï¼ˆæ”¶ç¼©ï¼‰   O(1)         æ¯ä¸ªå…ƒç´ ä»…é€€å‡ºä¸€æ¬¡
  æ€»å¤æ‚åº¦           O(n)         ç›¸è¾ƒæš´åŠ› O(nÂ²) æå¤§ä¼˜åŒ–

------------------------------------------------------------------------

## ğŸ’¬ äº”ã€æ¨èç®—æ³•ä¸­çš„"æ»‘åŠ¨çª—å£æ€ç»´"

  åº”ç”¨åœºæ™¯                           æ»‘åŠ¨çª—å£ä½œç”¨
  ---------------------------------- ------------------------------------
  **ç”¨æˆ·è¡Œä¸ºåºåˆ—å»ºæ¨¡**               æå–æœ€è¿‘ N æ¬¡ç‚¹å‡»è¡Œä¸ºä½œä¸ºåºåˆ—è¾“å…¥
  **Session-based Recommendation**   å®šä¹‰æ—¶é—´çª—å£å†…çš„ç”¨æˆ·æ´»è·ƒä¼šè¯
  **å®æ—¶ç‰¹å¾ç»Ÿè®¡**                   è®¡ç®—æ»‘åŠ¨ CTRã€æ›å…‰ç‡ã€å¬å›ç‡ç­‰ç‰¹å¾
  **å¼‚å¸¸æ£€æµ‹**                       æ£€æµ‹åœ¨æ»‘åŠ¨æ—¶é—´çª—å£å†…çš„è¡Œä¸ºçªå˜
  **æ—¶é—´åºåˆ—å»ºæ¨¡**                   ç”¨å›ºå®šé•¿åº¦çª—å£æ„é€  LSTM è¾“å…¥åºåˆ—

------------------------------------------------------------------------

## âœ… å…­ã€ä¸€å¥è¯è®°å¿†æ¨¡æ¿

> **æ»‘åŠ¨çª—å£ä¸‰æ­¥èµ°ï¼š** 1ï¸âƒ£ **æ‰©å¼ çª—å£** â†’ æŠŠå³æŒ‡é’ˆåŠ è¿›æ¥\
> 2ï¸âƒ£ **æ”¶ç¼©çª—å£** â†’ å½“ä¸æ»¡è¶³æ¡ä»¶æ—¶ç§»åŠ¨å·¦æŒ‡é’ˆ\
> 3ï¸âƒ£ **æ›´æ–°ç»“æœ** â†’ å½“æ»¡è¶³æ¡ä»¶æ—¶è®°å½•ç­”æ¡ˆ
